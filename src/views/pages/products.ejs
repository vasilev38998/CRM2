<%- include('../partials/header', { title: 'Напитки и рецепты' }) %>
<h2>Напитки и рецепты</h2>
<% if (error) { %><div class="error"><%= error %></div><% } %>

<h3>Добавить напиток</h3>
<form action="/products" method="post">
  <label>Название</label>
  <input name="name" required />
  <label>Цена продажи, ₽</label>
  <input name="price" type="number" step="0.01" required />
  <button type="submit">Добавить</button>
</form>

<h3>Добавить ингредиент в рецепт</h3>
<% products.forEach(product => { %>
  <div class="card">
    <h4><%= product.name %></h4>
    <form action="/products/<%= product.id %>/recipe" method="post">
      <label>Ингредиент</label>
      <select name="ingredient_id">
        <% ingredients.forEach(ingredient => { %>
          <option value="<%= ingredient.id %>"><%= ingredient.name %></option>
        <% }) %>
      </select>
      <label>Количество на порцию</label>
      <input name="quantity" type="number" step="0.0001" required />
      <button type="submit">Добавить в рецепт</button>
    </form>
  </div>
<% }) %>

<h3>Текущие рецепты</h3>
<table class="table">
  <thead>
    <tr>
      <th>Напиток</th>
      <th>Ингредиент</th>
      <th>Количество</th>
    </tr>
  </thead>
  <tbody>
    <% recipes.forEach(recipe => { %>
      <tr>
        <td><%= recipe.product_name %></td>
        <td><%= recipe.ingredient_name %></td>
        <td><%= recipe.quantity %></td>
      </tr>
    <% }) %>
  </tbody>
</table>
<%- include('../partials/footer') %>
